<!DOCTYPE html>
<head>    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                
    <script src="https://code.jquery.com/jquery-1.12.4.min.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_e70916d17389211d94b539fb886f31d9 {
                    position: relative;
                    width: 100.0%;
                    height: 93.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                body {
                    background-color: #343a40;
                }
            </style>
        
</head>
<link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}"><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><a class="navbar-brand" href="/"><img src="{{ url_for('static', filename='images/logo-text.png') }}" alt="Fuel Availability" width="200px"></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav mr-auto"><li class="nav-item active"><a class="nav-link" href="/map">Map <span class="sr-only">(current)</span></a></li><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Filter</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" onclick="showRadiusOnMap()">by Location</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/map/petrol">by Petrol</a><a class="dropdown-item" href="/map/diesel">by Diesel</a><div class="dropdown-divider"></div><a class="dropdown-item" href="/map">Clear Filters</a></div></li></ul><div class="form-inline my-2 my-lg-0"><button class="btn btn-outline-success my-2 my-sm-0" type="submit"><a href="/login" style="color: #fff;text-decoration: none;">Login</a></button></div></div></nav>    
    
            <div class="folium-map" id="map_e70916d17389211d94b539fb886f31d9" ></div>
        
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js">
            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                </body>
<script>    
    
            var map_e70916d17389211d94b539fb886f31d9 = L.map(
                "map_e70916d17389211d94b539fb886f31d9",
                {
                    center: [7.4887197, 80.3597918],
                    crs: L.CRS.EPSG3857,
                    zoom: 15,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            
            var Jawg_Matrix = L.tileLayer('https://{s}.tile.jawg.io/jawg-matrix/{z}/{x}/{y}{r}.png?access-token={accessToken}', {
                    attribution: '<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    minZoom: 0,
                    maxZoom: 22,
                    subdomains: 'abcd',
                    accessToken: 'TELKz5WXUoERxOFSzrqlLAUuZTN6pC7x7Tq4tKmmTvnWBpBzBZzJs9fGjoUt0iYJ'
                });
            Jawg_Matrix.addTo(map_e70916d17389211d94b539fb886f31d9)
            
        
    
            var marker_d1019838ea0855877a23edb3cde9b083 = L.marker(
                [7.4956537, 80.366616],
                {}
            ).addTo(map_e70916d17389211d94b539fb886f31d9);
        
    
        var popup_8bef3b121642fe03093ee17ae5211b08 = L.popup({"maxWidth": "100%"});

        
            var html_2ebaabe4c253d1b0c9a2b49d681540c0 = $(`<div id="html_2ebaabe4c253d1b0c9a2b49d681540c0" style="width: 100.0%; height: 93.0%;">Petrol: <strong style="color: #228B22">Available</strong><br><br>Diesel: <strong style="color: #228B22">Available</strong><br><br><a href="https://www.google.com/maps/search/?api=1&query=7.4956537,80.366616" target="_blank" rel="noopener noreferrer">Visit</a><br><br><a href="/amount/1" >More Info</a></div>`)[0];
            popup_8bef3b121642fe03093ee17ae5211b08.setContent(html_2ebaabe4c253d1b0c9a2b49d681540c0);
        

        marker_d1019838ea0855877a23edb3cde9b083.bindPopup(popup_8bef3b121642fe03093ee17ae5211b08)
        ;

        
    
    
            marker_d1019838ea0855877a23edb3cde9b083.bindTooltip(
                `<div>
                     Dhammika Filling Station
                 </div>`,
                {"sticky": true}
            );
        

            function showRadiusOnMap() {
                if (navigator.geolocation) {
                    position = navigator.geolocation.getCurrentPosition(
                        function (position) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            var circle = L.circle(
                                [lat, lon],
                                {
                                    radius: 7500
                                }
                            )
                            circle.addTo(map_e70916d17389211d94b539fb886f31d9);
                        },
                        function (err) {
                            alert(`Please provide location access and try again!`)
                        }
                    );
                }
            }
            </script>
                